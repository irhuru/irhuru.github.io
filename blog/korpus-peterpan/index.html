<!DOCTYPE html>
<html lang="en-us">
    <head>
        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9FGN30NREL"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9FGN30NREL', { 'anonymize_ip': false });
}
</script>

        
        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9FGN30NREL"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-9FGN30NREL', { 'anonymize_ip': false });
}
</script>



<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="Linguist and Conversational AI Designer sharing insights on NLP, human-computer interaction, and language technology. Explore tutorials, blog posts, and portfolio projects on conversational design, bilingual AI, and applied linguistics.">
<title>
An Analysis of Peter Pan Using the R Package Ko Rpus - Irati Hurtado
</title>



        <meta property="og:title" content="An analysis of Peter Pan using the R package koRpus - Irati Hurtado" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Learn how to use the koRpus R package for language research. Discover how to analyze readability and lexical diversity with easy-to-follow examples, including tokenization, Flesch readability, and type-token ratio calculations."/>
<meta property="og:url" content="https://irhuru.github.io/blog/korpus-peterpan/"/>
<meta property="og:site_name" content="Irati Hurtado"/>



<meta property="og:image" content="https://irhuru.github.io/blog/korpus-peterpan/PeterPanR.jpg"/>

<meta property="og:image" content="https://irhuru.github.io/blog/korpus-peterpan/readability.jpg"/>



        
<link rel="shortcut icon" href="/img/fav.ico">


        





<link rel="stylesheet" href="/css/main.min.6718dcbe1cd712951ccea6fb8f02538ca339511764326901ff329b6d42b1e38d.css" integrity="sha256-ZxjcvhzXEpUczqb7jwJTjKM5URdkMmkB/zKbbUKx440=" crossorigin="anonymous" media="screen">




    <link rel="stylesheet" href="/css/custom.css" integrity="" crossorigin="anonymous" media="screen">

        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero ">
                

<h1 class="bold-title is-1">Blog</h1>


            </div>
            
            <div class="section ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">
                
                Home
                
            </a>
            
            
            
            <a class="navbar-item" href="/#about">
                
                About
                
            </a>
            
            
            
            <a class="navbar-item" href="/projects/">
                
                Projects
                
            </a>
            
            
            
            <a class="navbar-item" href="/blog/">
                
                Blog
                
            </a>
            
            
            
            <a class="navbar-item" href="/resources/">
                
                Resources
                
            </a>
            
            
            
            <a class="navbar-item" href="/#contact">
                
                Contact
                
            </a>
            
            
            
        </div>
    </nav>
    <hr>
</div>



                
<div class="container">
    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://irhuru.github.io/blog/korpus-peterpan/">An analysis of Peter Pan using the R package koRpus</a>
    </h2>
    <div class="post-data">
        Aug 25, 2021 |
        4 minutes read
    </div>
    
    <div class="blog-share">
        Share this:
        
        
        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2firhuru.github.io%2fblog%2fkorpus-peterpan%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fab fa-facebook-f"></i>
            <span class="hidden">Facebook</span>
        </a>
        
        
        
        
        <a class="icon-reddit" href="https://www.reddit.com/submit?url=https%3A%2F%2Firhuru.github.io%2Fblog%2Fkorpus-peterpan%2F&title=An&#43;analysis&#43;of&#43;Peter&#43;Pan&#43;using&#43;the&#43;R&#43;package&#43;koRpus" onclick="window.open(this.href, 'reddit-share', 'width=580,height=296');return false;">
            <i class="fab fa-reddit"></i>
            <span class="hidden">Reddit</span>
        </a>
        
        
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Firhuru.github.io%2Fblog%2Fkorpus-peterpan%2F&title=An&#43;analysis&#43;of&#43;Peter&#43;Pan&#43;using&#43;the&#43;R&#43;package&#43;koRpus" onclick="window.open(this.href, 'linkedin-share', 'width=580,height=296');return false;">
            <i class="fab fa-linkedin"></i>
            <span class="hidden">LinkedIn</span>
        </a>
        
        
        <a class="whatsapp-share-button" href="https://wa.me/?text=https%3a%2f%2firhuru.github.io%2fblog%2fkorpus-peterpan%2f" onclick="window.open(this.href, 'whatsapp-share', 'width=580,height=296');return false;">
            <i class="fab fa-whatsapp"></i>
            <span class="hidden">WhatsApp</span>
        </a>
        
        
        <a class="email-share-button" href="mailto:?subject=An%20analysis%20of%20Peter%20Pan%20using%20the%20R%20package%20koRpus&body=https%3a%2f%2firhuru.github.io%2fblog%2fkorpus-peterpan%2f" onclick="window.open(this.href, 'email-share', 'width=550,height=235');return false;">
            <i class="fas fa-envelope"></i>
            <span class="hidden">Email</span>
        </a>
        
    </div>
    
    
    
    <p>
        Tags:
        
        <a href="/tags/tutorial">Tutorial</a>,
        
        <a href="/tags/data">Data</a>
        
    </p>
    
</div>

<div class="container markdown top-pad">
    <p><img src="PeterPanR.jpg" alt="PeterPanHeader"></p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">If you are into language research, you probably use <a href="https://www.r-project.org" style= "color: black; text-decoration: underline">R</a> to analyze your data. One of the good things about R is that you can install packages to extend R's basic functions. In this blog post, I'd like to introduce you to a very <b>useful package for language research</b>: <code style="color: black;">koRpus</code>.</p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Despite its name, the R package <b><code style="color: black;">koRpus</code> was designed to work with individual texts</b>, and not with a collection of texts (I know, this is confusing!). <code style="color: black;">koRpus</code> mostly provides you with automatized formulae to calculate readability and lexical diversity. For this post, <b>I'll be using Peter Pan's famous fairy tale to illustrate some of the things you can do</b> with this package.</p>
<h3 style="font-family: Verdana, Geneva, sans-serif">Setup</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">The first thing you'll need to do is to <b>install and load the package</b>, of course! In addition to loading the <code style="color: black;">koRpus</code> package, you'll also need to install and load a language model. Because the text I chose is in English, I loaded the English model (Note: I also loaded <code style="color: black;">tidyverse</code>, as it's useful for the analysis too).</p>
<pre><code>library(koRpus)
library(koRpus.lang.en)
library(tidyverse)
</code></pre><h3 style="font-family: Verdana, Geneva, sans-serif">Finding the texts</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">The second step is also pretty obvious: We need texts to analyze! In my case, <b>I downloaded the Peter Pan fairy tale from <a href="https://www.gutenberg.org" style= "color: black; text-decoration: underline">Project Gutenberg</a></b> as several plain txt files (one per chapter). You should move your text(s) to the folder where your R project is located.</p>
<h3 style="font-family: Verdana, Geneva, sans-serif">Tokenizing the texts</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">In order to run <code style="color: black;">koRpus</code>'s formulae, you first need to <b>split your text into tokens</b> (aka. tokenization). Here, you can install and use <code style="color: black;"><a href="https://www.cis.uni-muenchen.de/~schmid/tools/TreeTagger/" style= "color: black; text-decoration: underline">TreeTagger</a></code> or you can use the <code style="color: black;">tokenize</code> function from the <code style="color: black;">koRpus</code> package itself. The use of <code style="color: black;">TreeTagger</code> is recommended, as its results are more precise. However, because here I'm showing you how to use the <code style="color: black;">koRpus</code> package, I used <code style="color: black;">tokenize()</code> instead.</p>
<pre><code>tokenized_chapter1 = koRpus::tokenize(
  &quot;PeterPan_Chapter1.txt&quot;,
  lang = &quot;en&quot;,
  doc_id = &quot;Chapter 1&quot;
  )
</code></pre><p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">As explained before, since <code style="color: black;">koRpus</code> was designed to work with a single text, you would have to repeat this process for as many texts as you have.</p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Once your text is tokenized, you can use the <b><code style="color: black;">describe()</code> function to get some information about your text</b>, such as number of tokens, sentences, and so on. This is an optional step but it's something you might be interested in, depending on what you are researching.</p>
<pre><code>describe(tokenized_chapter1)
</code></pre><h3 style="font-family: Verdana, Geneva, sans-serif">Calculating readability</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Readability measures how easy it is to read a text. As you can imagine, several formulae have been proposed to calculate readability, as it's a quite complex construct. Luckily, <code style="color: black;">koRpus</code> provides <b>several of these formulae to choose from</b>. You can find a comprehensive list <a href="https://cran.r-project.org/web/packages/koRpus/vignettes/koRpus_vignette.html#readability" style= "color: black; text-decoration: underline">here</a>.</p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">In my case, I used the <a href="https://en.wikipedia.org/wiki/Flesch–Kincaid_readability_tests/" style= "color: black; text-decoration: underline">Flesch formula</a>, which is one of the most common ones. However, this formula requires the text to be <b>split into syllables</b>. But don't worry, <code style="color: black;">koRpus</code> has a function to do just that! The function is called <code style="color: black;">hyphen()</code> and you just need to pass the tokenized text as its argument.</p>
<pre><code>hyph_chapter1 = hyphen(tokenized_chapter1)
</code></pre><p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">After this is done, you can <b>apply the readability formula</b>:</p>
<pre><code>flesch_chapter1 = flesch(tokenized_chapter1, hyphen = hyph_chapter1)
</code></pre><p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Once again, you would have to repeat this process for as many texts as you have. For the Peter Pan fairy tale, I calculated the Flesch scores for all 17 chapters. You can also <b>plot the results afterwards</b> to see how readability changes throughout chapters (this is where <code style="color: black;">tidyverse</code> comes in handy!).</p>
<p><img src="readability.jpg" alt="PeterPanReadabilityGraph"></p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">It seems that the readability scores are pretty consistent throughout, which is a good sign!</p>
<h3 style="font-family: Verdana, Geneva, sans-serif">Calculating lexical diversity</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Just like for readability, <code style="color: black;">koRpus</code> has <b>several formulae to calculate lexical diversity</b>. Lexical diversity measures how many different lexical words there are in a text. Here, you can either use a specific function for the formula you want to use (these are called "wrapper functions"), or you can use a general function where you specify the exact formula you're interested in.</p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">I decided to calculate the type-token ratio (TTR) in the Peter Pan fairy tale. In the example below, you can see how I used the general formula to specify that <b>'type-token ratio' (TTR)</b> should be used.</p>
<pre><code>lex_div_chapter1 = lex.div(
  tokenized_chapter1,
  measure = (&quot;TTR&quot;),
  char = (&quot;TTR&quot;)
  )
show(lex_div_chapter1) # use this to print the results!
</code></pre><p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">In this formula, we first have to provide the name of the formula ("TTR") and then, we specify whether we want to output the <b>characteristics of the measure in question</b>. This latter is optional and can be omitted by writing <code style="color: black;">char = NULL</code> instead.</p>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">After using the <code style="color: black;">show()</code> function, we would get something like this:</p>
<pre><code>Total number of tokens: 3083
Total number of types:  875

Type-Token Ratio
               TTR: 0.28

TTR characteristics:
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
 0.2833  0.3209  0.3531  0.3871  0.3978  1.0000
   SD
 0.1117
</code></pre><p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">That would give us the TTR for chapter 1 only (<code style="color: black;">TTR: 0.28</code>), so remember to repeat this process for all your texts.</p>
<h3 style="font-family: Verdana, Geneva, sans-serif">Learning more</h3>
<p style="font-family: Verdana, Geneva, sans-serif; font-size: 18px; letter-spacing: -0.4px; word-spacing: 0.6px">Up to here, I have shown you some of the main things you can do with <code style="color: black;">koRpus</code>, but you can always read the <b><a href="https://cran.r-project.org/web/packages/koRpus/koRpus.pdf" style= "color: black; text-decoration: underline">official documentation</a></b> to learn more about the package and what it offers.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h5 style="font-family: Verdana, Geneva, sans-serif">If you found this post interesting, you can check out my other blog posts <a href="https://irhuru.github.io/blog/" style= "color: black; text-decoration: underline">here</a>!</h5>
<p>&nbsp;</p>

</div>

<div id="disqus_thread"></div>
<script>
(function() {
var d = document, s = d.createElement('script');
s.src = 'https://irhuru.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            <a href="https://github.com/victoriadrake/hugo-theme-introduction/"><strong>Introduction</strong></a> theme for <a href="http://gohugo.io/">Hugo</a>. Made with <a href="https://victoria.dev"><i class="fa fa-heart"></i> and <i class="fa fa-coffee"></i></a> by open source contributors.
        </span>
    
    </div>
</div>


                
            </div>
        </section>
        
        


<script src="https://irhuru.github.io/js/bundle.6eebba84ae610cff07aa65e4876c525fbfd13ffcb54222549ed8f5d9af10a7f2.js" integrity="sha256-buu6hK5hDP8HqmXkh2xSX7/RP/y1QiJUntj12a8Qp/I="></script>


        
        
        
        
    </body>
</html>
